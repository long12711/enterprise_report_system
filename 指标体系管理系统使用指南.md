# æŒ‡æ ‡ä½“ç³»ç®¡ç†ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç›®å½•
1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [APIæ–‡æ¡£](#apiæ–‡æ¡£)
5. [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)

---

## ç³»ç»Ÿæ¦‚è¿°

æŒ‡æ ‡ä½“ç³»ç®¡ç†ç³»ç»Ÿæ˜¯ä¼ä¸šç°ä»£åˆ¶åº¦è¯„ä»·ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—ï¼Œæä¾›å®Œæ•´çš„æŒ‡æ ‡ã€è¯„åˆ†è§„åˆ™å’Œé—®å·ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½ã€‚

### ä¸»è¦ç‰¹ç‚¹
- âœ… **æŒ‡æ ‡ç®¡ç†**ï¼šæ”¯æŒä¸‰çº§æŒ‡æ ‡ä½“ç³»çš„å¢åˆ æ”¹æŸ¥
- âœ… **è¯„åˆ†è§„åˆ™**ï¼šæŒ‰ä¼ä¸šçº§åˆ«ï¼ˆåˆçº§/ä¸­çº§/é«˜çº§ï¼‰åˆ†ç±»ç®¡ç†
- âœ… **ç‰ˆæœ¬æ§åˆ¶**ï¼šé—®å·ç‰ˆæœ¬ç®¡ç†ï¼Œæ”¯æŒè‰ç¨¿ã€å‘å¸ƒã€å½’æ¡£
- âœ… **JSONå­˜å‚¨**ï¼šè½»é‡çº§æ–‡ä»¶å­˜å‚¨ï¼Œæ˜“äºå¤‡ä»½å’Œè¿ç§»
- âœ… **Webç•Œé¢**ï¼šç›´è§‚çš„ç®¡ç†åå°ç•Œé¢
- âœ… **RESTful API**ï¼šå®Œæ•´çš„APIæ¥å£æ”¯æŒ

---

## åŠŸèƒ½ç‰¹æ€§

### 1. æŒ‡æ ‡ç®¡ç†
- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æŒ‡æ ‡
- ä¸‰çº§æŒ‡æ ‡ä½“ç³»ï¼ˆä¸€çº§ã€äºŒçº§ã€ä¸‰çº§æŒ‡æ ‡ï¼‰
- æŒ‡æ ‡çŠ¶æ€ç®¡ç†ï¼ˆä½¿ç”¨ä¸­/å·²åœç”¨ï¼‰
- é€‚ç”¨çº§åˆ«è®¾ç½®ï¼ˆåˆçº§/ä¸­çº§/é«˜çº§ï¼‰
- åˆ†å€¼é…ç½®å’Œä½è¯ææ–™è¦æ±‚

### 2. è¯„åˆ†è§„åˆ™ç®¡ç†
- æŒ‰çº§åˆ«ç®¡ç†è¯„åˆ†è§„åˆ™
- æ”¯æŒ5ç§è¯„åˆ†ç±»å‹ï¼šäºŒå…ƒã€å…¨éƒ¨å¿…é€‰ã€å¤šé¡¹ã€è´Ÿå‘ã€åˆ†çº§
- è§„åˆ™å¯ç”¨/åœç”¨å’Œä¼˜å…ˆçº§è®¾ç½®

### 3. é—®å·ç‰ˆæœ¬ç®¡ç†
- ç‰ˆæœ¬åˆ›å»ºå’Œç¼–è¾‘
- ç‰ˆæœ¬çŠ¶æ€ç®¡ç†ï¼ˆdraft/active/archived/closedï¼‰
- ç‰ˆæœ¬å†å²è¿½è¸ªå’Œå…‹éš†åŠŸèƒ½

---

## å¿«é€Ÿå¼€å§‹

### 1. è®¿é—®ç®¡ç†åå°
```
URL: http://localhost:5000/admin/indicator-management
ç”¨æˆ·å: admin
å¯†ç : admin123
```

### 2. ç®¡ç†æŒ‡æ ‡
1. ç‚¹å‡»"æ·»åŠ æŒ‡æ ‡"æŒ‰é’®
2. å¡«å†™æŒ‡æ ‡ä¿¡æ¯ï¼ˆä¸€çº§ã€äºŒçº§ã€ä¸‰çº§æŒ‡æ ‡ï¼‰
3. é€‰æ‹©é€‚ç”¨çº§åˆ«å’Œè®¾ç½®åˆ†å€¼
4. ä¿å­˜æŒ‡æ ‡

### 3. é…ç½®è¯„åˆ†è§„åˆ™
1. åˆ‡æ¢åˆ°"è¯„åˆ†è§„åˆ™"æ ‡ç­¾
2. é€‰æ‹©æŒ‡æ ‡å’Œçº§åˆ«
3. é…ç½®è¯„åˆ†é€»è¾‘
4. ä¿å­˜è§„åˆ™

---

## APIæ–‡æ¡£

### æŒ‡æ ‡ç®¡ç†API

#### è·å–æ‰€æœ‰æŒ‡æ ‡
```http
GET /api/admin/indicator-management/indicators?level=åˆçº§&status=active
```

#### åˆ›å»ºæŒ‡æ ‡
```http
POST /api/admin/indicator-management/indicators
Content-Type: application/json

{
  "level1": "æ²»ç†ç»“æ„",
  "level2": "è‚¡ä¸œå¤§ä¼š",
  "level3": "ä¼šè®®åˆ¶åº¦",
  "question": "æ˜¯å¦å»ºç«‹å®Œå–„çš„è‚¡ä¸œå¤§ä¼šåˆ¶åº¦ï¼Ÿ",
  "score_value": "2",
  "status": "active",
  "applicable_levels": ["åˆçº§", "ä¸­çº§", "é«˜çº§"]
}
```

#### æ›´æ–°æŒ‡æ ‡
```http
PUT /api/admin/indicator-management/indicators/{id}
```

#### åˆ é™¤æŒ‡æ ‡
```http
DELETE /api/admin/indicator-management/indicators/{id}
```

### è¯„åˆ†è§„åˆ™API

#### è·å–è¯„åˆ†è§„åˆ™
```http
GET /api/admin/indicator-management/scoring-rules?level=åˆçº§
```

#### åˆ›å»ºè¯„åˆ†è§„åˆ™
```http
POST /api/admin/indicator-management/scoring-rules
Content-Type: application/json

{
  "indicator_id": "IND001",
  "level": "åˆçº§",
  "rule_type": "binary",
  "scoring_logic": {"yes": 2, "no": 0}
}
```

### é—®å·ç‰ˆæœ¬API

#### è·å–æ‰€æœ‰ç‰ˆæœ¬
```http
GET /api/admin/indicator-management/questionnaires
```

#### å‘å¸ƒç‰ˆæœ¬
```http
POST /api/admin/indicator-management/questionnaires/{id}/publish
```

#### å…‹éš†ç‰ˆæœ¬
```http
POST /api/admin/indicator-management/questionnaires/{id}/clone
Content-Type: application/json

{
  "new_version": "v1.1",
  "new_name": "2025å¹´åº¦ä¼ä¸šè¯„ä»·é—®å·ï¼ˆä¿®è®¢ç‰ˆï¼‰"
}
```

---

## ä½¿ç”¨ç¤ºä¾‹

### æ‰¹é‡å¯¼å…¥æŒ‡æ ‡
```python
from indicator_management.models import IndicatorModel
import pandas as pd

df = pd.read_excel('indicators.xlsx')
indicator_model = IndicatorModel()

for _, row in df.iterrows():
    indicator_model.create({
        'level1': row['ä¸€çº§æŒ‡æ ‡'],
        'level2': row['äºŒçº§æŒ‡æ ‡'],
        'level3': row['ä¸‰çº§æŒ‡æ ‡'],
        'question': row['é¢˜ç›®'],
        'score_value': str(row['åˆ†å€¼']),
        'applicable_levels': ['åˆçº§', 'ä¸­çº§', 'é«˜çº§']
    })
```

### æŸ¥è¯¢ç‰¹å®šçº§åˆ«çš„æŒ‡æ ‡
```python
from indicator_management.models import IndicatorModel

indicator_model = IndicatorModel()
indicators = indicator_model.get_all(level='åˆçº§', status='active')

for ind in indicators:
    print(f"{ind['level1']} > {ind['level2']} > {ind['level3']}")
```

---

## æ•°æ®å¤‡ä»½ä¸æ¢å¤

### å¤‡ä»½æ•°æ®
```bash
cp -r indicator_management/data/ backup/indicator_data_$(date +%Y%m%d)/
```

### æ¢å¤æ•°æ®
```bash
cp -r backup/indicator_data_20251201/* indicator_management/data/
```

---

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚

**æœ€åæ›´æ–°**: 2025-12-01  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0